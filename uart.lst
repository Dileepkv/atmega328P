   1               		.file	"uart.c"
   2               	__SP_H__ = 0x3e
   3               	__SP_L__ = 0x3d
   4               	__SREG__ = 0x3f
   5               	__tmp_reg__ = 0
   6               	__zero_reg__ = 1
   9               		.text
  10               	.Ltext0:
  81               	.global	uart_init
  83               	uart_init:
  84               		.stabd	46,0,0
   1:uart.c        **** #include <avr/io.h>
   2:uart.c        **** #include <stdio.h>
   3:uart.c        **** #ifndef F_CPU
   4:uart.c        **** #define F_CPU 16000000UL
   5:uart.c        **** #endif
   6:uart.c        **** #ifndef BAUD
   7:uart.c        **** #define BAUD 9600
   8:uart.c        **** #endif
   9:uart.c        **** #include <util/setbaud.h>
  10:uart.c        **** 
  11:uart.c        **** 
  12:uart.c        **** void uart_init(void) {
  86               	.LM0:
  87               	.LFBB1:
  88               	/* prologue: function */
  89               	/* frame size = 0 */
  90               	/* stack size = 0 */
  91               	.L__stack_usage = 0
  13:uart.c        **** UBRR0H = UBRRH_VALUE;
  93               	.LM1:
  94 0000 1092 C500 		sts 197,__zero_reg__
  14:uart.c        **** UBRR0L = UBRRL_VALUE;
  96               	.LM2:
  97 0004 87E6      		ldi r24,lo8(103)
  98 0006 8093 C400 		sts 196,r24
  15:uart.c        **** #if USE_2X
  16:uart.c        **** UCSR0A |= _BV(U2X0);
  17:uart.c        **** #else
  18:uart.c        **** UCSR0A &= ~(_BV(U2X0));
 100               	.LM3:
 101 000a E0EC      		ldi r30,lo8(-64)
 102 000c F0E0      		ldi r31,0
 103 000e 8081      		ld r24,Z
 104 0010 8D7F      		andi r24,lo8(-3)
 105 0012 8083      		st Z,r24
  19:uart.c        **** #endif
  20:uart.c        **** UCSR0C = _BV(UCSZ01) | _BV(UCSZ00); /* 8-bit data */
 107               	.LM4:
 108 0014 86E0      		ldi r24,lo8(6)
 109 0016 8093 C200 		sts 194,r24
  21:uart.c        **** UCSR0B = _BV(RXEN0) | _BV(TXEN0); /* Enable RX and TX */
 111               	.LM5:
 112 001a 88E1      		ldi r24,lo8(24)
 113 001c 8093 C100 		sts 193,r24
 114 0020 0895      		ret
 116               	.Lscope1:
 118               		.stabd	78,0,0
 122               	.global	uart_putchar
 124               	uart_putchar:
 125               		.stabd	46,0,0
  22:uart.c        **** }
  23:uart.c        **** 
  24:uart.c        **** void uart_putchar(char c, FILE *stream) {
 127               	.LM6:
 128               	.LFBB2:
 129 0022 CF93      		push r28
 130               	/* prologue: function */
 131               	/* frame size = 0 */
 132               	/* stack size = 1 */
 133               	.L__stack_usage = 1
 134 0024 C82F      		mov r28,r24
  25:uart.c        **** if (c == '\n') {
 136               	.LM7:
 137 0026 8A30      		cpi r24,lo8(10)
 138 0028 01F4      		brne .L7
  26:uart.c        **** uart_putchar('\r', stream);
 140               	.LM8:
 141 002a 8DE0      		ldi r24,lo8(13)
 142 002c 0E94 0000 		call uart_putchar
 143               	.L7:
  27:uart.c        **** }
  28:uart.c        **** loop_until_bit_is_set(UCSR0A, UDRE0);
 145               	.LM9:
 146 0030 8091 C000 		lds r24,192
 147 0034 85FF      		sbrs r24,5
 148 0036 00C0      		rjmp .L7
  29:uart.c        **** UDR0 = c;
 150               	.LM10:
 151 0038 C093 C600 		sts 198,r28
 152               	/* epilogue start */
  30:uart.c        **** }
 154               	.LM11:
 155 003c CF91      		pop r28
 156 003e 0895      		ret
 158               	.Lscope2:
 160               		.stabd	78,0,0
 163               	.global	uart_getchar
 165               	uart_getchar:
 166               		.stabd	46,0,0
  31:uart.c        **** char uart_getchar(FILE *stream) {
 168               	.LM12:
 169               	.LFBB3:
 170               	/* prologue: function */
 171               	/* frame size = 0 */
 172               	/* stack size = 0 */
 173               	.L__stack_usage = 0
 174               	.L11:
  32:uart.c        **** loop_until_bit_is_set(UCSR0A, RXC0);
 176               	.LM13:
 177 0040 8091 C000 		lds r24,192
 178 0044 87FF      		sbrs r24,7
 179 0046 00C0      		rjmp .L11
  33:uart.c        **** return UDR0;
 181               	.LM14:
 182 0048 8091 C600 		lds r24,198
  34:uart.c        **** }
 184               	.LM15:
 185 004c 0895      		ret
 187               	.Lscope3:
 189               		.stabd	78,0,0
 191               	.Letext0:
 192               		.ident	"GCC: (GNU) 4.7.2"
DEFINED SYMBOLS
                            *ABS*:0000000000000000 uart.c
     /tmp/ccwN2xvi.s:2      *ABS*:000000000000003e __SP_H__
     /tmp/ccwN2xvi.s:3      *ABS*:000000000000003d __SP_L__
     /tmp/ccwN2xvi.s:4      *ABS*:000000000000003f __SREG__
     /tmp/ccwN2xvi.s:5      *ABS*:0000000000000000 __tmp_reg__
     /tmp/ccwN2xvi.s:6      *ABS*:0000000000000001 __zero_reg__
     /tmp/ccwN2xvi.s:83     .text:0000000000000000 uart_init
     /tmp/ccwN2xvi.s:124    .text:0000000000000022 uart_putchar
     /tmp/ccwN2xvi.s:165    .text:0000000000000040 uart_getchar

NO UNDEFINED SYMBOLS
